$(document).ready(function(){function t(t,i){var r=$("#UserList tbody");$.ajax({url:n+"GetFUL",type:"post",data:{ps:t,elec:i},success:function(n){$(".addUserSelect").empty();$(".addUserSelect").append('<option value="" disabled selected>Select a user<\/option>');$.each(n,function(n,t){$(".addUserSelect").append($("<option>",{value:t.firstName,text:t.firstName+" "+t.lastName+" - "+t.roles,id:t.id}))});$("#overlay").removeClass("overlay")},beforeSend:function(){$("#overlay").addClass("overlay")},error:function(){$("#modal-teams .modal-body").prepend('<div class="alert-error alert alert-danger" role="alert">Encountered an error. Contact administrator immediately.<\/div>');$("#overlay").removeClass("overlay");window.setTimeout(function(){$(".alert-error").fadeOut("slow")},2e3)}});$.ajax({url:n+"getUL",type:"post",data:{ps:t,elec:i},success:function(n){r.empty();$.trim(n)?n.forEach(function(n){var i='<a data-id="'+n.id+'" data-key="'+t+'" class="delbtn btn btn-sm btn-danger" href="javascript:void(0);">Delete<\/a>';r.append("<tr><td>"+n.firstName+"<\/td><td>"+n.lastName+"<\/td><td>"+n.cellPhone+"<\/td><td>"+n.roles+"<\/td><td>"+i+"<\/td><\/tr>")}):r.append('<tr><td colspan="5">No Users added yet<\/td><\/tr>');$("#overlay").removeClass("overlay")},beforeSend:function(){$("#overlay").addClass("overlay")},error:function(){$("#modal-teams .modal-body").prepend('<div id="sche-alert-error" class="alert alert-danger" role="alert">Encountered an error. Contact administrator immediately.<\/div>');$("#overlay").removeClass("overlay");window.setTimeout(function(){$(".alert-danger").fadeOut("slow")},4e3)}})}var n="/api/TaskApi/";$(".addUserSelect").select2({placeholder:"Select an user",theme:"classic"});$(".modal").modal({show:!1,backdrop:"static",keyboard:!1,dismissible:!1,opacity:.9,inDuration:300,outDuration:200,startingTop:"4%",endingTop:"10%",ready:function(){},complete:function(){}});$("body").on("click",".delbtn",function(){var u=$(this).attr("data-id"),i=$(this).attr("data-key"),f=$("#UserList tbody"),r=$("#electionID").val();confirm("Are you sure you want to delete this user?")&&$.ajax({url:n+"DUFP",type:"post",data:{ps:i,elec:r,userID:u},success:function(n){n===!1&&($("[data-id='"+i+"'] #indicator").addClass("text-danger icon-close"),$("[data-id='"+i+"'] #indicator").removeClass("text-success icon-check"));$("#modal-teams .modal-body").prepend('<div class="alert-error alert alert-danger" role="alert">User sucessfully deleted.<\/div>');window.setTimeout(function(){$(".alert-error").fadeOut("slow")},2e3);t(i,r)},beforeSend:function(){$("#overlay").addClass("overlay")},error:function(){$("#modal-teams .modal-body").prepend('<div class="alert-error alert alert-danger" role="alert">Encountered an error. Contact administrator immediately.<\/div>');$("#overlay").removeClass("overlay");window.setTimeout(function(){$(".alert-error").fadeOut("slow")},2e3)}})});$("body").on("click",".getMembers",function(){var n=$(this).attr("data-id"),i;$(".modal-title").text("Edit Team for "+$(this).attr("title"));i=$(this).attr("data-ele-id");$(".addMembers").attr("data-pa",n);t(n,i)});$("body").on("click",".addMembers",function(){var i=$(this).attr("data-pa"),r=$("#electionID").val(),u=$(".addUserSelect").find(":selected").attr("id");$.trim(u)?$.ajax({url:n+"ANM",type:"post",data:{ps:i,elec:r,userID:u},success:function(n){$.trim(n)&&(n===!0&&($("[data-id='"+i+"'] #indicator").removeClass("text-danger icon-close"),$("[data-id='"+i+"'] #indicator").addClass("text-success icon-check")),$("#modal-teams .modal-body").prepend('<div id="sche-alert-error" class="alert alert-success" role="alert">User added successfully.<\/div>'),window.setTimeout(function(){$(".alert-success").fadeOut("slow")},2e3),t(i,r))},beforeSend:function(){$("#overlay").addClass("overlay")},error:function(){$("#modal-teams .modal-body").prepend('<div class="alert-error alert alert-danger" role="alert">Encountered an error. Contact administrator immediately.<\/div>');$("#overlay").removeClass("overlay");window.setTimeout(function(){$(".alert-error").fadeOut("slow")},2e3)}}):($("#modal-teams .modal-body").prepend('<div id="alert-error" class="alert-error alert alert-primary alert-dismissible" role="alert">No user selected.<\/div>'),window.setTimeout(function(){$(".alert-error").fadeOut("slow")},2e3))})});